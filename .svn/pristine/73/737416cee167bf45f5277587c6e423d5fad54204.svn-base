<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<meta charset="UTF-8"/>
<head>
<script th:src="@{/js/gmaps.js}"></script>
<script th:src="@{/js/controles_front.js}"></script>
<link rel="stylesheet" th:href="@{/bootstrap-4.5.2-dist/css/bootstrap.min.css}" />
<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}" />
<link href="https://fonts.googleapis.com/css?family=Lobster&display=swap" rel="stylesheet">
<link rel="stylesheet"	href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" />
<link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<link rel="stylesheet"	href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" />
<link rel="stylesheet" type="text/css" href="/hotel-datepicker/dist/css/hotel-datepicker.css">
<link rel="stylesheet" type="text/css" href="js/css/main.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBCKiIqCdZGrVxx06LSbe7uG3zXOq1Cz5k&callback=initMap" async defer></script>
<style> 
	#map {
      height: 100%;
    }
    
	.map-example {
	  margin-top:10px;
	}
</style>
</head>

<div th:replace="layout/public_layout :: navigation"></div>	
	<body class="bg-light">
	<div class="bg-muted">
		<section>
			<div class="container">
				<div class="row">
					<div class="col-lg-6 text-dark">
						<h1 th:text="${piso.nombre}"></h1>
						<i class="fas fa-star" style="color: red;"></i><span>5,0 -</span>
						<i class="fas fa-map-marker-alt" style="color: red;"></i><span th:text="${piso.poblacion}+' - España'"></span>
					</div>
				</div>
			</div>
		</section>
	<div class="col-lg-9 mx-auto">
		<div class="card mb-6 p-2">
			<div class="row">
				<div id="carouselExampleControls" class="carousel slide col-md-6" data-ride="carousel">
					<div class="carousel-inner shadow p-2" >
						<div th:each="miniFoto,iterador : ${miniFotos}" th:id="${iterador.index}" class="carousel-item">
							<img th:if="${#strings.length(miniFoto.fotoImg) > 0}" class="d-block w-100" th:src="@{'/uploads/'+${miniFoto.fotoImg}}" th:alt="${miniFoto.detalle}" /> 
							<a th:src="@{'/uploads/'+${miniFoto.fotoImg}}"></a>
						</div>
					</div>
					<a class="carousel-control-prev" href="#carouselExampleControls"
						role="button" data-slide="prev"> <span
						class="carousel-control-prev-icon" aria-hidden="true"></span> <span
						class="sr-only">Previous</span>
					</a> <a class="carousel-control-next" href="#carouselExampleControls"
						role="button" data-slide="next"> <span
						class="carousel-control-next-icon" aria-hidden="true"></span> <span
						class="sr-only">Next</span>
					</a>
				</div>
	
				<div class="col-md-6 mx-auto">
					<div class="row">
						<div class="col-lg-12">
						   <h3>Reserva de apartamento completo</h3>
						   <h5><span th:text="#{text.galeria.anfitrion}"></span><span th:text="${' '+piso.usuario.UsrPerfil.nombre}"></span></h5>
						   <i class="fas fa-user-friends"></i><span th:text="'x'+${piso.personas}"></span>
						   <span>&nbsp;&nbsp;&nbsp;</span>
						   <i class="fas fa-bed"></i><span th:text="'x'+${piso.habitaciones}"></span>
						   <span>&nbsp;&nbsp;&nbsp;</span>
						   <i class="fas fa-bath"></i><span th:text="'x'+'2'"></span>
						</div>
						
						<div class="col-lg-11">
							<hr class="my-4">
							<div th:switch="${idioma}"> 
								<p th:case="'ES'"  th:text="${piso.detalle}"></p>
								<p th:case="'EN'"  th:text="${piso.detalleEN}"></p>
								<p th:case="'FR'"  th:text="${piso.detalleFR}"></p>
								<p th:case="'DE'"  th:text="${piso.detalleDE}"></p>
							</div>
						</div>
						<div class="col-lg-11">
							<i class="fas fa-home"></i><span class="font-weight-bolder small">&nbsp; Alojamiento completo</span>
							<p class="text-muted small">Dispondr&aacutes del alojamiento completo para ti</p>
							<i class="fas fa-broom small"></i><span class="font-weight-bolder small">&nbsp; Servicio de limpieza</span>
							<p class="text-muted small">Nuestros apartamentos se iguienizan siguiendo el mas estricto protocolo de seguridad e higiene.<a href="#">Mas informaci&oacuten</a></p>
							
							
						</div>
						<div class="col-lg-11">
						<ul class="list-group list-group-horizontal-sm">
							<li class="list-group-item p-2 border-0"><h4 th:text="'Desde '+${piso.tarifaBase}+'€ / Noche'"></h4></li>
						</ul>
						<ul class="list-group list-group-horizontal-sm">
							<li class="list-group-item p-2 border-0"><a th:if="${piso.nombre}" class="btn btn-outline-secondary btn-xs"  th:href="@{'/reservas/reserva/'}+${piso.id}"> Reservar</a></li>
							<li class="list-group-item p-2 border-0"><a th:if="${piso.nombre}" class="btn btn-outline-secondary btn-xs" data-toggle="modal" data-target="#condicionesModal" > Condiciones</a></li>
							<li class="list-group-item p-2 border-0"><a th:if="${piso.nombre}" class="btn btn-outline-secondary btn-xs" data-toggle="modal" data-target="#cancelacionModal" > Cancelaci&oacuten</a></li>
						</ul>
						</div>
					</div>
				</div>
			</div>
			<div class="col-lg-11">
				<hr class="my-3"/>
			</div>
			
		<div class="col-lg-12 ml-10">
			<div class="row">
				<div class="col-md-7 ml-5">
					<h4>Servicios</h4>
					<div class="container">
						<div class="row" th:each="servicio: ${piso.servicios}">
							<div class="col-1">
								<h2><i th:classappend="${servicio.icono}+' pt-2'"></i></h2>
							</div>
							<div class="col-8">
								<div th:switch="${idioma}"> 
									<span th:case="'ES'" class="font-weight-bolder" th:text="${servicio.nombreServicio}"></span>
									<span th:case="'EN'" class="font-weight-bolder" th:text="${servicio.nombreServicioEN}"></span>
									<span th:case="'FR'" class="font-weight-bolder" th:text="${servicio.nombreServicioFR}"></span>
									<span th:case="'DE'" class="font-weight-bolder" th:text="${servicio.nombreServicioDE}"></span>
								</div>
								<div th:switch="${idioma}"> 
									<p th:case="'ES'"  class="text-muted"  th:text="${servicio.descripcion}"></p>
									<p th:case="'EN'"  class="text-muted"  th:text="${servicio.descripcionEN}"></p>
									<p th:case="'FR'"  class="text-muted"  th:text="${servicio.descripcionFR}"></p>
									<p th:case="'DE'"  class="text-muted"  th:text="${servicio.descripcionDE}"></p>
								</div>
							</div>
						</div>
					</div>
				</div>
				
					<div class="col-md-3  m-3">
						<div class="card shadow bg-white rounded">
							
							<div class="card-body">
							<div class="row-sm-2 col-form-label">
								<h4 id ="totalPrecio" name ="totalPrecio" th:text="${piso.tarifaBase}+'€ /Noche'"></h4>
								<i class="fas fa-star" style="color: red;"></i><span>5,0</span>
							</div>
									<form th:action="@{/reservas/reserva/}+${piso.id}" method="get">
										<div class="form-group form-check">
											<label for="demo11" class="row-sm-2 col-form-label" th:text="#{text.index.fecha}"></label>
											<div class="demo__input row-sm-10" id="demo1-input-parent" >
												<input  class="form-control" type="text" id="demo11" name="fechas"  >
											</div>
										</div>
			
										<div class="form-group form-check">
											<button type="submit" class="form-control btn-secondary btn-block" th:text="#{text.index.buscar}">Buscar</button>
										</div>
										
										<div class="form-group form-check content-select">
											<p sec:authorize="!isAuthenticated()" class="text-muted" th:text="#{text.index.cuenta}">
											<br></p> 
												<a sec:authorize="!isAuthenticated()" th:href="@{'/login'}" th:text="#{text.index.inicie}"></a>
											
										</div>
									</form>
								</div>
							</div>
						</div>
					</div>
				</div>
		
	 <div class="col-md-12">
 		<div class="map-example ">
		    <div class="row">
		        <div class="col-lg-12">
		            <div class="border border-dark rounded" id="map"></div>
		            <div style="height:410px;"></div>
		        </div>
		      </div>
		   </div>
		</div>
	</div>
		</div>
		</div>
</body>	

<div th:replace="layout/layout :: modalCondiciones"></div>
	
	<script type="text/javascript" src="http://lopezb.com/hoteldatepicker/js/fecha.min.js"></script>
	<script type="text/javascript" src="http://lopezb.com/hoteldatepicker/js/hotel-datepicker.min.js"></script>
	<script src="https://code.jquery.com/jquery-3.5.1.min.js" integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js" integrity="sha384-B4gt1jrGC7Jh4AgTPSdUtOBvfO8shuf57BaghqFfPlYxofvL8/KUEfYiJOMMV+rV" crossorigin="anonymous"></script>

	
<script th:inline="javascript">
	
	/*<![CDATA[*/
	var piso = /*[[${itemPiso}]]*/ 'default';
	var ocupados=  /*[[${ocupados}]]*/ 'ocupados';
	/*]]>*/
	activaCarrousel();
	
	var today = new Date();
	var tomorrow = new Date();
	var input1 = document.querySelector('#demo1-input-parent input');
	var demo1 = null;
	var x = parseFloat(piso.coordenadaX);
	var y = parseFloat(piso.coordenadaY);
	 
	tomorrow.setDate(tomorrow.getDate() + 1);
	input1.value = fecha.format(today, 'YYYY-MM-DD') + ' - '+ fecha.format(tomorrow, 'YYYY-MM-DD');
	demo1 = new HotelDatepicker(input1, {
	    disabledDates: ocupados, enableCheckout: true
	});

	mapaGaleria(x,y);
	
	
	</script>