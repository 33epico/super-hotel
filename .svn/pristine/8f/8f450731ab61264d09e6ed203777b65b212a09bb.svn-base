<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<link rel="stylesheet" type="text/css" href="CSS.css">
<style type="text/css">
span {
	display: block;
	font-size: .8em;
	margin: 0px 0 10px;
	padding: 5px 0 5px 11px;
	width: 200px
}

.confirmacion {
	background: #C6FFD5;
	border: 1px solid green;
}

.negacion {
	background: #ffcccc;
	border: 1px solid red
}
</style>

<link
	href="http://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
	rel="stylesheet" id="bootstrap-css">


<meta charset="utf-8">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="">
<meta name="author" content="">


<!-- Bootstrap core CSS -->
<link href="vendor/bootstrap/css/bootstrap.min.css" rel="stylesheet">

</head>

<body>


	<div class="container py-4">
		<div class="card text-white">
			<div class="card-body">
				<form th:action="@{/reestablecerpw/actualizado}" method="get">
					<input type="hidden" name="key" id="key" class="form-control"
						th:value="${key}" />
					<div class="form-group col-sm-6">
						<input type="password" name="password" id="password" min="8"
							max="12" class="form-control" placeholder="Nueva contraseña"
							required autofocus />
					</div>
					<div class="form-group col-sm-6">
						<input type="password" name="password2" id="password2" min="8"
							max="12" class="form-control" placeholder="Repita contraseña"
							required autofocus />
					</div>
					<div class="form-group col-sm-6">
						<input type="submit" class="btn btn-lg btn-primary btn-block"
							value="Enviar" disabled />
					</div>
				</form>
			</div>
		</div>

	</div>
	<footer th:replace="layout/layout :: footer"></footer>

	<!-- Bootstrap core JavaScript -->
	<script th:src="@{/vendor/jquery/jquery.min.js}"></script>
	<script th:src="@{/vendor/bootstrap/js/bootstrap.bundle.min.js}"></script>


	<script type="text/javascript">
		$(document)
				.ready(
						function() {
							//variables
							var pass1 = $('[name=password1]');
							var pass2 = $('[name=password2]');
							var confirmacion = "Las contraseñas si coinciden";
							var longitud = "La contraseña debe estar formada entre 8-12 carácteres (ambos inclusive)";
							var negacion = "No coinciden las contraseñas";
							var vacio = "La contraseña no puede estar vacía";
							//oculto por defecto el elemento span
							var span = $('<span></span>').insertAfter(pass2);
							span.hide();
							//función que comprueba las dos contraseñas
							function coincidePassword() {
								var valor1 = pass1.val();
								var valor2 = pass2.val();
								//muestro el span
								span.show().removeClass();
								//condiciones dentro de la función
								if (valor1 != valor2) {
									span.text(negacion).addClass('negacion');
								}
								if (valor1.length == 0 || valor1 == "") {
									span.text(vacio).addClass('negacion');
								}
								if (valor1.length<8 || valor1.length>12) {
									span.text(longitud).addClass('negacion');
								}
								if (valor1.length != 0 && valor1 == valor2) {
									$(':input[type="submit"]').prop('disabled',
											false);
									span.text(confirmacion).removeClass(
											"negacion")
											.addClass('confirmacion');
								}
							}
							//ejecuto la función al soltar la tecla
							pass2.keyup(function() {
								coincidePassword();
							});
						});
	</script>
</html>