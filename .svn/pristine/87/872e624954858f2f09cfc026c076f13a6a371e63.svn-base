<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" xmlns:sec="http://www.thymeleaf.org/extras/spring-security">

<head th:fragment="head">
<script th:src="@{/js/gmaps.js}"></script>
<script th:src="@{/js/controles_front.js}"></script>
<link rel="stylesheet" th:href="@{/bootstrap-4.5.2-dist/css/bootstrap.min.css}" />
<link rel="stylesheet" th:href="@{/css/jquery-ui.min.css}" />
<link href="https://fonts.googleapis.com/css?family=Lobster&display=swap" rel="stylesheet">
<link rel="stylesheet"	href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" />
 <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">
<link rel="stylesheet"	href="https://use.fontawesome.com/releases/v5.0.8/css/all.css" />
<link rel="stylesheet" type="text/css" href="/hotel-datepicker/dist/css/hotel-datepicker.css">
<link rel="stylesheet" type="text/css" href="hotel-datepicker/dist/css/hotel-datepicker.css">
<link rel="stylesheet" type="text/css" href="js/css/main.css">
<link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyBCKiIqCdZGrVxx06LSbe7uG3zXOq1Cz5k&callback=initMap" async defer></script>

</head>

<navigation th:fragment="navigation"> <!-- Navigation -->

	<nav class="navbar navbar-expand-lg navbar-dark bg-dark" style="height: 6%">
		<div class="container">
			<button class="navbar-toggler" type="button" data-toggle="collapse"
				data-target="#navbarResponsive" aria-controls="navbarResponsive"
				aria-expanded="false" aria-label="Toggle navigation">
				<span class="navbar-toggler-icon"></span>
			</button>
			
			<div class="collapse navbar-collapse" id="navbarResponsive">
				<span id="notificacionMSG" th:text="${notificacionMSG}"></span>
					<ul class="navbar-nav ml-auto" >
						<li class="nav-item"><a class="nav-link small" th:href="@{/index}" th:text="#{text.menup.inicio}"> <span class="sr-only">(current)</span></a></li>
						<li class="nav-item"><a class="nav-link small" th:href="@{/publico/listar}" th:text="#{text.menup.pisos}"></a></li>
						<li class="nav-item"><a class="nav-link small" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_GESTOR','ROLE_USUARIO')" th:href="@{/mensajes/noLeidos}" id="notificacion" nombre="notificacion"></a></li>
						<li class="nav-item"><a class="nav-link small" th:href="#{url.blog}" th:text="#{text.menup.blog}"></a></li>
						<li class="nav-item"><a class="nav-link small" th:href="#{url.contacto}" th:text="#{text.menup.contacto}"></a></li>
						<li class="nav-item"><a class="nav-link small" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_GESTOR')" th:href="@{/privada/listar}" th:text="#{text.menup.gestion}"></a></li>
						<li class="nav-item"><a class="nav-link small" sec:authorize="hasAnyRole('ROLE_ADMIN')" th:href="@{/administracion/administrador}" th:text="#{text.menup.administracion}"></a></li>
					    <li class="nav-item"><a class="nav-link small" sec:authorize="hasAnyRole('ROLE_ADMIN','ROLE_GESTOR')" th:href="@{/privada/reservas}" th:text="#{text.menup.reservas}"></a></li>
						
						<ul class="navbar-nav ml-auto">
							<li sec:authorize="!isAuthenticated()" class="nav-item dropdown show ">
								<a class="btn btn-outline-secondary btn-sm" th:href="@{/login}">Sign In</a>
							</li>
								
							<li sec:authorize="isAuthenticated()" class="nav-item dropdown show mx-1">
							<a class="btn btn-secondary dropdown-toggle btn-sm" href="#" role="button" id="dropdownMenuLink" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
								 <span sec:authentication="name"></span></a>
		
								<div class="dropdown-menu" aria-labelledby="dropdownMenuLink">
									<form id="logoutForm" th:action="@{/logout}" method="post">
										<button class="dropdown-item" onclick="document.getElementById('logoutForm').submit();" type="submit">Salir</button>
										<input type="hidden" th:name="${_csrf.parameterName}" th:value="${_csrf.token}" />
									</form>
									<form id="perfil" th:action="@{/perfil}" method="post">
										<button class="dropdown-item " type="submit">Mi perfil</button>
									</form>
								</div>
							</li>
						</ul>
						
						<ul class="navbar-nav ml-auto">
							<li class="nav-item dropdown show mx-1">
							<a class="btn btn-secondary btn-sm"  href="#" role="button" id="dropdownLenguaje" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false"> 
								<span th:text="#{text.locale.languaje}"></span>
							</a>
								<div class="dropdown-menu" aria-labelledby="dropdownmenulink">
									<a class="dropdown-item" th:href="@{/locale(lang=es_ES)}" th:text="#{text.locale.es}">ES</a>
									<a class="dropdown-item" th:href="@{/locale(lang=en_EN)}" th:text="#{text.locale.en}">EN</a>
									<a class="dropdown-item" th:href="@{/locale(lang=fr_FR)}" th:text="#{text.locale.fr}">FR</a> 
									<a class="dropdown-item" th:href="@{/locale(lang=de_DE)}" th:text="#{text.locale.de}">DE</a>
								</div></li>
						</ul>
					</ul>	
				</div>
			</div>
			<script th:inline="javascript">
	
				setInterval(function notificacion(){
					var url = "/mensajes/ajax/notificacionMensaje";
					$.get(url , function(htmlexterno){
						$('#notificacion').html(htmlexterno);
					});
				}, 5000);
				
				window.onload= function notificacion(){
					var url = "/mensajes/ajax/notificacionMensaje";
					$.get(url , function(htmlexterno){
						$('#notificacion').html(htmlexterno);
						
					});

				};
				
				
			</script>
			
		</nav>
		<!-- mensajes flask -->
		<div class="alert alert-success" th:if="${success != null}" th:text="${success}"></div>
		<div class="alert alert-danger" th:if="${error != null}" th:text="${error}"></div>
		<div class="alert alert-warning" th:if="${warning != null}" th:text="${warning}"></div>
		<div class="alert alert-info" th:if="${info != null}" th:text="${info}"></div>


</navigation>

<navigation th:fragment="subnavigation"> 
<nav class="navbar  navbar-expand-sm navbar-light bg-dark fixed-bottom " style="height: 5%">
  <a class="navbar-brand text-light" href="#">
    <span class="fa "> &#xf0fd;</span>   <span th:text="${titulo}"></span>
  </a>
  </nav>
</navigation>
